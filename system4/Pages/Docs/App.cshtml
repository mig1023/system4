@page "/apps/{appid}"
@model system4.Pages.Docs.AppModel
@{
    ViewData["Title"] = "App";
}

<div class="container p-0">
    <h1 class="display-5 padding_headers">Информация о записи на подачу:</h1>
    <div class="row align-items-start">
        <div class="col">
            <div class="container p-0">
                <div class="row align-items-start">
                    <div class="col-4">Номер записи:</div>
                    <div class="col-sm-8">@Model.Appointment.AppNum</div>
                </div>
                <div class="row align-items-start">
                    <div class="col-4">Дата записи:</div>
                    <div class="col-sm-8">@Model.Appointment.AppDate.ToString("dd.MM.yyyy")</div>
                </div>
                <div class="row align-items-start">
                    <div class="col-4">Время записи:</div>
                    <div class="col-sm-8">@Model.Appointment.TimeslotID</div>
                </div>
                <div class="row align-items-start">
                    <div class="col-4">Визоый центр:</div>
                    <div class="col-sm-8">@Model.Appointment.Center.BName</div>
                </div>
                <div class="row align-items-start">
                    <div class="col-4">Тип визы:</div>
                    <div class="col-sm-8"><b>@Model.Appointment.VisaType.VName</b></div>
                </div>  
                <div class="row align-items-start">
                    <div class="col-4">Статус:</div>
                    <div class="col-sm-8"><b>@Model.Appointment.StatusLine</b></div>
                </div> 
                <div class="row align-items-start">
                    <div class="col-4">Доставка:</div>
                    <div class="col-sm-8">@Model.Appointment.DeliveringLine</div>
                </div> 
                <div class="row align-items-start">
                    <div class="col-4">Отправка SMS:</div>
                    <div class="col-sm-8">@Model.Appointment.SMSLine</div>
                </div> 
                <div class="row align-items-start">
                    <div class="col-4">Документы подаются:</div>
                    @if (Model.Appointment.Dwhom > 0)
                    {
                        <div class="col-sm-8 poa_style">
                            @foreach (string line in Model.Appointment.POALines)
                            {
                                @line<br />
                            }
                        </div>
                    }
                    else
                    {
                        <div class="col-sm-8">лично</div>
                    }
                </div> 
            </div>
        </div>
        <div class="col">
            <div class="container">
                <div class="row align-items-start">
                    <div class="col-4">EMail:</div>
                    <div class="col-sm-8">@Model.Appointment.EMail</div>
                </div>
                <div class="row align-items-start">
                    <div class="col-4">Телефон:</div>
                    <div class="col-sm-8">@Model.Appointment.Phone</div>
                </div>
                <div class="row align-items-start">
                    <div class="col-4">Мобильный:</div>
                    <div class="col-sm-8">@Model.Appointment.Mobile</div>
                </div>
                <div class="row align-items-start">
                    <div class="col-4">Адрес:</div>
                    <div class="col-sm-8">@Model.Appointment.Address</div>
                </div>
            </div>
        </div>
    </div>
</div>

<p> </p>

<div class="container p-0">
    <h1 class="display-5 padding_headers">Список заявителей:</h1>
    <div class="container p-0">
        @{
            int i = 1;
            foreach (Data.AppData app in Model.Appointment.AppData)
            {
                <div class="row align-items-start">
                    <div class="col-1">@(i++).</div>
                    <div class="col align-items-start">@app.FName @app.LName</div>
                    <div class="col">@app.PassNum</div>
                    <div class="col">@app.BirthDate.ToString("dd.MM.yyyy")</div>
                    <div class="col">@app.StatusLine</div>
                </div>
            }
        }
    </div>
</div>

@if (Model.Appointment.Comments.Count > 0)
{
    <p> </p>

    <div class="border border-danger">
        @foreach (DB.AppComments comment in Model.Appointment.Comments)
        {
            <div class="row align-items-start m-3 comment_text">
                <span>@comment.CommentText
                    <span class="comment_text_data">@comment.Login</span>
                    <span class="comment_text_data">@comment.CommentDate.ToString("dd.MM.yyyy HH:nn")</span>
                </span>
            </div>
        }

    </div>
}